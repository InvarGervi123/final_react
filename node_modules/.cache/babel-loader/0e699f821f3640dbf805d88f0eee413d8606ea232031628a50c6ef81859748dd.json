{"ast":null,"code":"import axios from\"axios\";import React,{useEffect,useRef,useState}from\"react\";import{useSearchParams,Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const[list,setList]=useState(null);const[loading,setLoading]=useState(false);const inputRef=useRef();const[query]=useSearchParams();const nav=useNavigate();useEffect(()=>{doApi();},[query]);const onSub=e=>{e.preventDefault();const val=inputRef.current.value;if(val===\"\")return;nav(\"/?s=\"+val);};const doApi=async()=>{const queryS=query.get(\"s\")||\"black\";const url1=\"https://www.omdbapi.com/?s=\".concat(queryS,\"&apikey=5a292f28\");const url2=\"https://www.omdbapi.com/?s=\".concat(queryS,\"&apikey=90781f94\");setLoading(true);try{const{data}=await axios.get(url1);setList(data.Search);}catch(error){console.log(error);try{const{data}=await axios.get(url2);setList(data.Search);}catch(error2){console.log(error2);setList([]);}}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"pageBg d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center py-4 flex-grow-1\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:onSub,className:\"col-12 col-md-5 mx-auto mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group searchGroup\",children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,className:\"form-control\",type:\"search\",placeholder:\"search...\",defaultValue:query.get(\"s\")||\"black\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning searchBtn\",children:\"Search\"})]})}),/*#__PURE__*/_jsx(\"h2\",{className:\"listTitle\",children:\"Results\"}),loading||!list?/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"}):list.length===0?/*#__PURE__*/_jsx(\"h4\",{children:\"No results found\"}):/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:list.map(item=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-4 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"movieCard d-flex text-start\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.Poster,alt:item.Title,className:\"movieThumb me-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"movieTitle\",children:item.Title}),/*#__PURE__*/_jsxs(\"div\",{className:\"movieYear\",children:[\"Year: \",item.Year]}),/*#__PURE__*/_jsx(Link,{to:\"/info/\"+item.imdbID,className:\"btn btn-dark btn-sm mt-2\",children:\"More info\"})]})]})},item.imdbID))})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"topHeader text-center py-2 text-white\",children:\"2Monkeys.co.il 2011-2023\"})]});}","map":{"version":3,"names":["axios","React","useEffect","useRef","useState","useSearchParams","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Home","list","setList","loading","setLoading","inputRef","query","nav","doApi","onSub","e","preventDefault","val","current","value","queryS","get","url1","concat","url2","data","Search","error","console","log","error2","className","children","onSubmit","ref","type","placeholder","defaultValue","length","map","item","src","Poster","alt","Title","Year","to","imdbID"],"sources":["C:/Users/User/Desktop/Bot discord/lesson_JS/final_react/final_react/src/pages/Home.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSearchParams, Link, useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Home() {\r\n  const [list, setList] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const inputRef = useRef();\r\n  const [query] = useSearchParams();\r\n  const nav = useNavigate();\r\n\r\n  useEffect(() => {\r\n    doApi();\r\n  }, [query]);\r\n\r\n  const onSub = (e) => {\r\n    e.preventDefault();\r\n    const val = inputRef.current.value;\r\n    if (val === \"\") return;\r\n    nav(\"/?s=\" + val);\r\n  };\r\n\r\n  const doApi = async () => {\r\n    const queryS = query.get(\"s\") || \"black\";\r\n\r\n    const url1 = `https://www.omdbapi.com/?s=${queryS}&apikey=5a292f28`;\r\n    const url2 = `https://www.omdbapi.com/?s=${queryS}&apikey=90781f94`;\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data } = await axios.get(url1);\r\n      setList(data.Search);\r\n    } catch (error) {\r\n      console.log(error);\r\n      try {\r\n        const { data } = await axios.get(url2);\r\n        setList(data.Search);\r\n      } catch (error2) {\r\n        console.log(error2);\r\n        setList([]);\r\n      }\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"pageBg d-flex flex-column\">\r\n      <div className=\"container text-center py-4 flex-grow-1\">\r\n\r\n        <form onSubmit={onSub} className=\"col-12 col-md-5 mx-auto mb-3\">\r\n          <div className=\"input-group searchGroup\">\r\n            <input\r\n              ref={inputRef}\r\n              className=\"form-control\"\r\n              type=\"search\"\r\n              placeholder=\"search...\"\r\n              defaultValue={query.get(\"s\") || \"black\"}\r\n            />\r\n            <button className=\"btn btn-warning searchBtn\">Search</button>\r\n          </div>\r\n        </form>\r\n\r\n        <h2 className=\"listTitle\">Results</h2>\r\n\r\n        {loading || !list ? (\r\n          <h2>Loading...</h2>\r\n        ) : list.length === 0 ? (\r\n          <h4>No results found</h4>\r\n        ) : (\r\n          <div className=\"row justify-content-center\">\r\n            {list.map(item => (\r\n              <div key={item.imdbID} className=\"col-md-6 col-lg-4 p-2\">\r\n                <div className=\"movieCard d-flex text-start\">\r\n                  <img\r\n                    src={item.Poster}\r\n                    alt={item.Title}\r\n                    className=\"movieThumb me-3\"\r\n                  />\r\n                  <div>\r\n                    <h4 className=\"movieTitle\">{item.Title}</h4>\r\n                    <div className=\"movieYear\">Year: {item.Year}</div>\r\n\r\n                    <Link\r\n                      to={\"/info/\" + item.imdbID}\r\n                      className=\"btn btn-dark btn-sm mt-2\"\r\n                    >\r\n                      More info\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n        )}\r\n\r\n      </div>\r\n\r\n      <footer className=\"topHeader text-center py-2 text-white\">\r\n        2Monkeys.co.il 2011-2023\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}